request:
  api:
    url: https://pos-api-staging-03.chowbus.com/api/v3/shoppingcart/{{order_id}}/finish
    method: PUT
    body: '{
	"est_delivery_start_at": "",
	"created_at": 1698736084,
	"employee_name": "ying c",
	"tables": [{
		"entity": "square-table",
		"foreign_name": "",
		"table_id": "1f041233-597f-417a-912c-8936a337f034",
		"party_size": 1,
		"is_open_tab": false,
		"name": "M01",
		"line_item_ids": ["dish_item_id"]
	}],
	"sent_times": 1,
	"external_order_id": "",
	"note": "",
	"checks": [{
		"id": "{{check_id}}",
		"pre_tax_line_items_discount": 0,
		"tax": 57,
		"billable_total": 0,
		"total": 557,
		"line_items": [{
			"billable_total": 0,
			"id": "2cf2c33e-0fe3-4047-92ec-2bd629c4619b",
			"line_item_id": "{{dish_item_id1}}",
			"tax": 57,
			"pre_tax_line_items_discount": 0,
			"pre_tax_order_fee": 0,
			"post_tax_order_fee": 0,
			"total": 557,
			"ratio": "1",
			"sub_total": 500,
			"pre_tax_order_discount": 0
		}],
		"pre_tax_order_discount": 0,
		"post_tax_order_fee": 0,
		"number": 1,
		"pre_tax_order_fee": 0,
		"sub_total": 500,
		"status": "paid"
	}],
	"pre_tax_order_fee": 0,
	"delivery": null,
	"prepare_by": null,
	"updated_at": 1698736095,
	"post_tax_order_fee": 0,
	"display_status": "Paid",
	"device_id": "f4bca918-1307-4a2e-a008-c547b336c40e",
	"refunds": null,
	"closed_at": 1698736458,
	"tax": 57,
	"line_items": [{
		"amount": 500,
		"meal_prototype_id": "737627",
		"is_excluded_from_order_discount": false,
		"created_at": 1698736089,
		"id": "{{dish_item_id1}}",
		"sequence": 0,
		"served_at": 0,
		"category": {
			"id": "71216",
			"name": "10527_category",
			"foreign_name": "10527_category"
		},
		"special_product_group": null,
		"description": null,
		"meal_instance_quantity": 1,
		"tax_code": "CBT14929126",
		"quick_notes": null,
		"member_price": 400,
		"customized_price": 0,
		"tag": "#1",
		"complete_time": 0,
		"is_tax_exempt": false,
		"meal_instance_id": "1406519",
		"pre_tax_order_fee": 0,
		"order_id": "{{order_id}}",
		"name": "cy_autotest_meal1",
		"tax": 57,
		"weight_unit": "",
		"schedule_send_at": 0,
		"status": "sent",
		"price_and_quantity_note": "",
		"foreign_name": "cy_autotest_meal1",
		"price": 500,
		"sub_total": 500,
		"total": 557,
		"pre_tax_order_discount": 0,
		"transferred_from_id": "",
		"sent_at": 1698736094,
		"kitchen_name": "",
		"pre_tax_line_items_discount": 0,
		"updated_at": 1698736089,
		"billable_total": 0,
		"customized_options": [],
		"reward_offer_id": "",
		"weight": 0,
		"menu": {
			"id": "11404",
			"name": "10527_01menu",
			"foreign_name": "10527_01menu"
		},
		"post_tax_order_fee": 0,
		"note": "",
		"tax_rate": 0,
		"rushed_at": 0
	}],
	"restaurant_display_at": null,
	"refund_total": null,
	"id": "{{order_id}}",
	"restaurant_id": "10527",
	"billable_total": 0,
	"cart_number": "19",
	"status": "Closed",
	"pre_tax_order_discount": 0,
	"estimated_open_at": null,
	"service_type": "dine_in",
	"total": 557,
	"est_delivery_end_at": null,
	"order_number": "{{order_number}}",
	"delivery_style": "",
	"table_number": "M01",
	"tax_rate": 0.1125,
	"order_source": "walk_in",
	"is_reopened": false,
	"sub_total": 500,
	"tip_items": null,
	"batches": [{
		"dish_item_id": "{{dish_item_id1}}",
		"order_id": "{{order_id}}",
		"batch_number": 0
	}],
	"guests": null,
	"employee_id": "9891",
	"online_payment_immediately": false,
	"restaurant_started_at": "",
	"payments": [{
		"id": "{{payment_id}}",
		"is_separate": false,
		"last4": "",
		"cardholder_name": "",
		"amount": 557,
		"payment_type": "cash",
		"created_at": 1698736458,
		"total": 557,
		"order_id": "{{order_id}}",
		"is_refund_tips": false,
		"change": 0,
		"payment_status": "paid",
		"tips": 0,
		"fee": 0,
		"fees": [],
		"tips_editable": false,
		"currency": "usd",
		"check_id": "{{check_id}}"
	}],
	"is_cutoff_order": false,
	"sync_status": null,
	"pre_tax_line_items_discount": 0,
	"fees": [],
	"tips": 0,
	"is_tax_exempt": false,
	"discounts": [],
	"is_edited": true
}'
    header:
      Content-Type: application/json
      User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36
        (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36
      Authorization: Bearer {{access_token}}

validation:
  expressions:
    - condition: equals
      path: id
      value: "{{order_id}}"
responseParam:
  expressions:
    - path: order_number
      value: order_number
waitTime: 0
caseType: http
desc: pos新建订单接口
